
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Client Web &#8212; Apunts d&#39;Odoo</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'client_web';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Usar Jupyter en Odoo." href="Jupyter%20y%20Odoo.html" />
    <link rel="prev" title="Web Controllers" href="web_controllers.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/odoo_logo.svg" class="logo__image only-light" alt="Apunts d'Odoo - Home"/>
    <script>document.write(`<img src="_static/odoo_logo.svg" class="logo__image only-dark" alt="Apunts d'Odoo - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Introducció a Odoo
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="instalarodoo.html">Instal·lar Odoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="odoo.html">Desenvolupar per a Odoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="vista.html">La vista</a></li>
<li class="toctree-l1"><a class="reference internal" href="accions_menus.html">Accions i menús</a></li>
<li class="toctree-l1"><a class="reference internal" href="reports.html">Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="wizards.html">Wizards</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_controllers.html">Web Controllers</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Client Web</a></li>


<li class="toctree-l1"><a class="reference internal" href="Jupyter%20y%20Odoo.html">Usar Jupyter en Odoo.</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/xxjcaxx/exemples_sge" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/xxjcaxx/exemples_sge/issues/new?title=Issue%20on%20page%20%2Fclient_web.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/client_web.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Client Web</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Client Web</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arquitectura-del-client-web">Arquitectura del client web</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#enviant-el-client-al-navegador">Enviant el client al navegador</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#els-assets">Els Assets</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#exemple-afegir-css-al-nostre-modul">Exemple: Afegir CSS al nostre mòdul</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arquitectura-dels-moduls-en-javascript">Arquitectura dels mòduls en Javascript</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#utilitzar-moduls-natius-es6-en-odoo">Utilitzar mòduls natius ES6 en Odoo</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#owl">OWL</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-un-component-d-odoo-en-owl">Crear un component d’Odoo en OWL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#insertar-components-en-odoo">Insertar components en Odoo</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modificar-components-en-owl">Modificar components en OWL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-nous-widgets-en-owl">Crear nous Widgets en OWL</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-un-widget-molt-simple">Crear un Widget molt simple</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-un-widget-per-a-un-many2many">Crear un widget per a un Many2many</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#props">Props</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#components-prefedinits">Components prefedinits</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-components-predefinits">Crear Components predefinits</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-un-widget-per-a-un-field-en-mode-lectura-escriptura">Crear un widget per a un field en mode lectura/escriptura</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modificar-una-vista-en-owl">Modificar una vista en OWL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-noves-vistes-en-owl">Crear noves vistes en OWL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hooks-en-owl">Hooks en OWL</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#qweb">QWeb</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="client-web">
<h1>Client Web<a class="headerlink" href="#client-web" title="Link to this heading">#</a></h1>
<p>En la secció de la vista i de l’herència en la vista hem pogut
modificar la forma en que <code class="docutils literal notranslate"><span class="pre">Odoo</span></code> mostra o gestiona la
base de dades amb el client web. La gestió de la vista es limita a crear
lists, forms, kanbans… Els creadors d’Odoo recomanen utilitzar
aquestes vistes sempre que es puga. No obstant, de vegades volem fer
alguna cosa més personalitzada. Si volem personalitzar a baix nivell
l’aparença i funcionament del client web, deguem entendre bé cóm
funciona.</p>
<p>L’Odoo actual carrega un client complet a la web, que es comunica amb
missatges breus i concrets amb el servidor. Missatges en JSON que sols
tenen dades o ordres a executar. Cada vegada que refresquem el navegador
web, està enviant-se un programa de client complet, però quan entrem a
un menú, sols s’envia un missatge JSON demanant unes dades i es rep un
altre amb una llista de les dades a mostrar pel client. Opcionalment,
s’envía el xml de la vista, el qual serà interpretat pel client per
mostrar correctament les dades.</p>
<blockquote>
<div><p>Si volem veure tot el que el servidor rep o envia al client, podem arrancar el servici amb l’opció –log-level=debug_rpc. També es pot obrir amb F12 la consola del navegador.</p>
</div></blockquote>
<p>El client web és una <strong>SPA (Single Page Application)</strong>, a l’estil
d’altres frameworks coneguts com Angular o React, va creant i destruint
elements de la interfície contínuament. Aquests elements es diuen <code class="docutils literal notranslate"><span class="pre">components</span></code>. Els components és la manera genèrica de compartimentar l’interficie. Després hi ha components que actuen com a <code class="docutils literal notranslate"><span class="pre">Widgets</span></code> per mostrar fields o efectes visuals o altres, per exemples, són <code class="docutils literal notranslate"><span class="pre">views</span></code> per mostrar un o varis registres.</p>
<p>Amb Odoo, es proporcionen tres clients web diferenciats, però que, internament, funcionen amb el mateix framework. Aquest són el <strong>web client</strong> que és el “backoffice” utilitzat pel empleats de l’empresa, el <strong>website</strong> que és la pàgina web pública i el <strong>point of sale</strong>, que és per al punts de venda.</p>
<p>Quan ens referim a crear mòduls per al client, generalment ens referim a fer canvis en l’apariència o comportament de la web.</p>
<p>Reflexionem sobre el tipus de modificació que necessitem:</p>
<ul class="simple">
<li><p>Un canvi menor en l’apariència: Afegir algunes regles CSS.</p></li>
<li><p>Un canvi estétic o de comportament de la manera en que es visualitza un field: Afegir HTML, CSS i Javascript a un <strong>Widget</strong>.</p></li>
<li><p>Un canvi en la manera en la que un field enmagatzema o recupera les dades: Modificació del Javascript del Widget i de la part del model o el controlador Javascript de la vista.</p></li>
<li><p>Un canvi en la manera de mostrar un recordset sencer: Crear una  vista.</p></li>
<li><p>Fer una web des de 0 amb les dades d’Odoo: Utilitzar els <a class="reference external" href="https://www.odoo.com/documentation/master/developer/reference/backend/http.html">Web controllers</a></p></li>
</ul>
<section id="arquitectura-del-client-web">
<h2>Arquitectura del client web<a class="headerlink" href="#arquitectura-del-client-web" title="Link to this heading">#</a></h2>
<p>El <strong>WebClient</strong> d’Odoo es construeix amb mòduls, de la mateixa manera que
els mòduls per al ‘servidor’. Sols que en els mòduls per ampliar el
client web es modifiquen altres arxius a banda dels típics dels models de
python o els xml de la vista.</p>
<p>L’arquitectura és <strong>MVC</strong> internament. És a dir, Odoo té un model (ORM
sobre PostgresSQL), un controlador (Mètodes de Python) i una vista (El
client Web definit en el servidor amb XML) i el propi client web també
té un model (Les peticions Ajax al servidor amb JSON i la interpretació
d’aquestes), un controlador (Funcions Javascript per a gestionar
aquestes dades) i una vista (El renderitzat dels elements web al
navegador). Com que Javascript és un llenguatge que deixa fer de tot, no
tenim perquè respectar aquesta arquitectura, però els nostres mòduls han
de poder ser mantinguts i cal que aprofiten al màxim els recursos que el
client web ja ens proporciona, per tant, intentarem programar el menys
possible i aprofitar tot el que ja té el client.</p>
<p>Els mòduls principals del client web depenen del mòdul <strong>web</strong>, que
proporciona el nucli del client web. Els altres complementen a aquest.
Hi ha mòduls que específicament es diuen, per exemple, <strong>web_kanban</strong>,
que amplien la web. Però en realitat qualsevol mòdul ho pot fer. El
mòdul web conté tot l’HTML i Javascript necessari per a que els altres
mòduls de la web funcionen.</p>
<p>Per modificar el client web cal proporcional HTML, xml, CSS, Javascript
i imatges. Això ha d’estar en el directori <strong>static</strong> del mòdul:</p>
<ul class="simple">
<li><p>static/src/js : the JavaScript files</p></li>
<li><p>static/src/css : the CSS files</p></li>
<li><p>static/src/xml : the HTML template files</p></li>
<li><p>static/img : pictures used in templates or CSS</p></li>
<li><p>static/libs : JS libraries needed by the module</p></li>
</ul>
<p>El server no manipula aquesta informació, però la processa i l’envia a client.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Com que els CSS i JS no són processades pel servidor, no cal reiniciar el servidor per veure els canvis, sols refrescar el navegador. Això no sempre funciona, ja que el servidor pot ser que no processe els assets o que la cau del navegador no actualitze el JS o el XML.</p>
</div>
</section>
<section id="enviant-el-client-al-navegador">
<h2>Enviant el client al navegador<a class="headerlink" href="#enviant-el-client-al-navegador" title="Link to this heading">#</a></h2>
<p>Cada vegada que refresquem, s’envia el client sencer. Això vol dir
molts CSS, moltes línies de Javascript de molt fitxers distints i molt
d’HTML i XML. Per evitar saturar la xarxa, el servidor fa una
compressió de totes eixes dades de la següent manera:</p>
<ul class="simple">
<li><p>Tots els CSS i Javascript són concatenats en un sol fitxer. La concatenació s’ordena per dependències entre mòduls.</p></li>
<li><p>El Javascript és minimitzat llevant espais i refactoritzant les variables per noms més curts.</p></li>
<li><p>Una web HTML molt simple sols amb l’enllaç als CSS i Javascript és enviada al client.</p></li>
<li><p>Tot es comprimeix en gzip pel server per reduir l’enviament. El navegador és capaç de descomprimir.</p></li>
</ul>
<p>Tot això fa difícil de fer debug amb el client. Per això es recomana ficar <strong>?debug=1</strong> a la URL per demanar que no minimitze.</p>
<section id="els-assets">
<h3>Els Assets<a class="headerlink" href="#els-assets" title="Link to this heading">#</a></h3>
<p>El client d’Odoo és molt complex i necessita tindre Javascript, HTML i
CSS de molts fitxers distints. Gestionar això permetent que qualsevol
puga fer un mòdul per afegir més implica una gestió d’aquests enllaços
més automàtica. Per això han creat principalment tres <strong>bundles</strong> en XML
que no són més que una col·lecció de links a Javascript o CSS. Aquests
tenen l’estructura d’un Template QWeb i els més comuns són:</p>
<ul class="simple">
<li><p><strong>web.assets_common</strong>: amb les coses comuns.</p></li>
<li><p><strong>web.assets_backend</strong>: Amb les coses específiques del Backend.</p></li>
<li><p><strong>web.assets_frontend</strong>: Amb les coses de la web pública.</p></li>
</ul>
<p>Si volem afegir fitxers a un asset en odoo, s’ha d’afegir al manifest:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;assets&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;web.assets_backend&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;web/static/src/xml/**/*&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s1">&#39;web.assets_common&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;web/static/lib/bootstrap/**/*&#39;</span><span class="p">,</span>
        <span class="s1">&#39;web/static/src/js/boot.js&#39;</span><span class="p">,</span>
        <span class="s1">&#39;web/static/src/js/webclient.js&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">},</span>
</pre></div>
</div>
<blockquote>
<div><p>Aquesta és la manera general d’afegir funcionalitats o estils. Però tal vegada el nostre widget no necessita ser carregat sempre i estem afegint una càrrega constant a la xarxa. Per això pot ser interessant afegir la llibreria sols quan es crea el widget en temps d’execució. Odoo proporciona formes de carrega llibreries i CSS de forma dinàmica (lazyload en Qweb template engine).</p>
</div></blockquote>
<p>Documentació sobre els assets: <a class="reference external" href="https://www.odoo.com/documentation/master/developer/reference/frontend/assets.html">https://www.odoo.com/documentation/master/developer/reference/frontend/assets.html</a></p>
<section id="exemple-afegir-css-al-nostre-modul">
<h4>Exemple: Afegir CSS al nostre mòdul<a class="headerlink" href="#exemple-afegir-css-al-nostre-modul" title="Link to this heading">#</a></h4>
<p>Abans d’entrar en la creació de Widgets, pot ser interessant observar
cóm els <strong>bundles</strong> es poden ampliar d’una forma simple per modificar o
afegir CSS.</p>
<p>El primer és crear el css en
<strong>/<code class="docutils literal notranslate"><span class="pre">&lt;modul&gt;</span></code>/static/src/css/<code class="docutils literal notranslate"><span class="pre">&lt;modul&gt;</span></code>.css</strong>. En el nostre cas, sols fem un per a fer la lletra mès menuda:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">reserves_tree</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="mf">0.8</span><span class="kt">em</span><span class="p">;}</span>
</pre></div>
</div>
<p>Després afegim el css al bundle <strong>assets_backend</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;assets&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;web.assets_backend&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;web/static/src/xml/**/*&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">},</span>
</pre></div>
</div>
<p>I per últim, sols cal utilitzar la classe css:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;field</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bookings&quot;</span><span class="w"> </span><span class="na">limit=</span><span class="s">&quot;10&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;reserves_tree&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="arquitectura-dels-moduls-en-javascript">
<h2>Arquitectura dels mòduls en Javascript<a class="headerlink" href="#arquitectura-dels-moduls-en-javascript" title="Link to this heading">#</a></h2>
<p>De la mateixa manera que hem vist per introduir un CSS personalitzat en
Odoo, es pot introduir un Javascript. Aquest serà afegit al final del
bundle i serà executat pel navegador.</p>
<p>Odoo té molt de Javascript ja funcionant i podem interferir. Però el major problema és que no sabem molt bé qué s’està executant en cada moment. Javascript és un llenguatge que
treballa molt de forma asíncrona. Això permet que es puga carregar part
de la web mentres una altra part ja està funcionant. Aquesta asincronia
fa que no es puga predir fàcilment en quin ordre es carregarà o
executarà tot. Totes les aplicacions web complexes tenen que solucionar
eixos problemes. Javascript té un ecosistema de biblioteques molt divers
i no tots treballen de la mateixa manera, de fet, molts han solventat
carències del llenguatge amb tècniques de programació i biblioteques.
Aques és el cas dels mòduls. Odoo gestiona la complexitat del seu
Javascript amb mòduls i dependències d’altres mòduls. Per això no és
tan simple con afegir un parell d’instruccions Jquery per modificar una
part del DOM, ja que no podem saber si està carregada o quan es
carregarà. Abans de fer partxes que solucionen mal els problemes, cal
estudiar cóm ho fa Odoo.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Els mòduls simplifiquen la programació de les webs grans. Els mòduls oculten la complexitat de la programació de les distintes parts lògiques d’un programa. Els mòduls ofereixen una interfície en la que interactuen amb la resta de mòduls. Un programa modular és més fàcilment ampliable i reutilitzable.
En els mòduls cal aconseguir tindre la major independència al aconseguit el menor ‘’’acoblament’’’ i la major ‘’’cohesió’’’. L’acoblament és la excessiva dependència d’un mòdul respecte a altres i la cohesió és la íntima relació entre els elements interns del mòdul. [<a class="reference external" href="https://developer.mozilla.org/es/docs/Web/JavaScript/Introducci%C3%B3n_a_JavaScript_orientado_a_objetos">https://developer.mozilla.org/es/docs/Web/JavaScript/Introducción_a_JavaScript_orientado_a_objetos</a>]</p>
</div>
<p>Odoo suporta tres maneres de fer codi Javascript:</p>
<ul class="simple">
<li><p>Sense mòduls (No recomanable)</p></li>
<li><p>Amb mòduls natius ES6.</p></li>
<li><p>Amb el seu propi sistema de mòduls (En versions antigues)</p></li>
</ul>
<section id="utilitzar-moduls-natius-es6-en-odoo">
<h3>Utilitzar mòduls natius ES6 en Odoo<a class="headerlink" href="#utilitzar-moduls-natius-es6-en-odoo" title="Link to this heading">#</a></h3>
<p>La documentació oficial recomana fer els nous mòduls d’aquesta manera.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">someFunction</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./file_b&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">otherFunction</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">someFunction</span><span class="p">(</span><span class="nx">val</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">3</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="owl">
<h1>OWL<a class="headerlink" href="#owl" title="Link to this heading">#</a></h1>
<p>Moltes pàgines web SPA com és Odoo estan fetes en un framework de
Javascript, ja que els manteniments dels components, els hooks, la
reactivitat o la comunicació amb el servidor són complicats i és
innecessari fer-ho sempre. Alguns dels frameworks són: Angular, Vue,
React…</p>
<p>Odoo té el seu propi, i a partir de la versió 14 es diu <code class="docutils literal notranslate"><span class="pre">OWL</span></code> i es
desenvolupa per separat, sempre pensant en que siga la base dels nous
elements de la web en Odoo.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>La primera pregunta que un desenvolupador web es fa al veure que Odoo està desenvolupant el seu framework és perquè no utilitzen Angular, Vue o React o qualsevol altre framework madur. Els desenvolupadors d’Odoo la responen en cada article: Necessiten que siga més lleugera, adaptada totalment a Odoo i no dependre d’altres. Semblen bons motius i si tenen raó o no es veurà en les pròximes versions.</p>
</div>
<p>OWL és un framework web menut (&lt;20KB) que té els elements d’un
framework modern:</p>
<ul class="simple">
<li><p>Un sistema declaratiu de components</p></li>
<li><p>Un sistema de reactivitat basat en Hooks.</p></li>
<li><p>Per defecte té un mode concurrent.</p></li>
<li><p>Un store per a l’estat del programai</p></li>
<li><p>Un Router.</p></li>
<li><p>Un sistema de plantilles amb QWeb.</p></li>
<li><p>Al contrari que en versions anteriors, OWL aprofita la sintaxi ES6
per a les classes.</p></li>
<li><p>Un virtual DOM amb renderització asíncrona.</p></li>
</ul>
<p>En la <a class="reference external" href="https://github.com/odoo/owl">documentació oficial d’OWL</a> quasi no menciona cóm integrar-lo en Odoo. Això és perquè OWL aspira a ser un framework independent i poder ser utilitzat per a quasevol cosa. En la realitat, ha sigut desenvolupat pensant en Odoo i quasi sols s’utilitza en projectes relacionats.</p>
<blockquote>
<div><p>Quan desenvolupem per a Odoo en OWL cal tenir en compte que Odoo afegeix a OWL alguns objectes propis, com una estructura estàndard de <code class="docutils literal notranslate"><span class="pre">props</span></code>, el concepte de <code class="docutils literal notranslate"><span class="pre">Widget</span></code>, registres ja predefinits i moltes coses més.</p>
</div></blockquote>
<p>Abans de continuar cal preguntar-se què es vol aconseguir o què podem aconseguir amb OWL:</p>
<ul class="simple">
<li><p>Crear una web completa sense relació amb Odoo.</p></li>
<li><p>Crear una web completa que tinga com a backend Odoo (no té molta diferència de l’anterior)</p></li>
<li><p>Fer una secció en la web o el backend d’Odoo.</p></li>
<li><p>Fer una vista, un menú, un widget nou per a Odoo.</p></li>
</ul>
<p>Aquest manual es centra sobretot en l’última opció i anem a començar
per ella.</p>
<section id="crear-un-component-d-odoo-en-owl">
<h2>Crear un component d’Odoo en OWL<a class="headerlink" href="#crear-un-component-d-odoo-en-owl" title="Link to this heading">#</a></h2>
<p>Els components tenen una plantilla <code class="docutils literal notranslate"><span class="pre">Qweb</span></code>, un estil <code class="docutils literal notranslate"><span class="pre">css</span></code> i un <code class="docutils literal notranslate"><span class="pre">Javascript</span></code>. Amés, estan enregistrats.</p>
<p>Abans de començar, cal fer l’estructura de directoris i fitxers i un xml per afegir el nostre Javascript al bundle:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>  <span class="s1">&#39;assets&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;web.assets_backend&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;provesowl/static/src/js/component.js&#39;</span><span class="p">,</span>
        <span class="s1">&#39;provesowl/static/src/css/component.css&#39;</span><span class="p">,</span>
    <span class="p">],</span>
</pre></div>
</div>
<p>En la ruta especificada farem el fitxer <strong>components.js</strong> i el css.</p>
<p>Els components en OWL estan basats en classes ES6 o en el seu sistema modular. En components.js afegim aquest codi:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">//Importar els elements del framework</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">xml</span><span class="p">,</span><span class="w"> </span><span class="nx">useState</span><span class="p">,</span><span class="w"> </span><span class="nx">mount</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@odoo/owl&quot;</span><span class="p">;</span>

<span class="c1">// Crear el component que hereta de Component d&#39;OWL</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">MyComponent</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="nx">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">xml</span><span class="sb">`</span>
<span class="sb">        &lt;div t-on-click=&quot;increment&quot;&gt;</span>
<span class="sb">            &lt;t t-esc=&quot;state.value&quot;&gt;</span>
<span class="sb">        &lt;/div&gt;</span>
<span class="sb">    `</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// La funció setup és on s&#39;inicialitza el component, no deuriem utilitzar constructor.</span>
<span class="w">    </span><span class="nx">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">increment</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">value</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// La forma de cridar a la funció xml en tagged templates </span>
<span class="c1">// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates</span>

<span class="nx">MyComponent</span><span class="p">.</span><span class="nx">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">xml</span><span class="sb">`&lt;button t-on-click=&quot;increment&quot;&gt;  </span>
<span class="sb">Click Me! [&lt;t t-esc=&quot;state.value&quot;/&gt;]</span>
<span class="sb">&lt;/button&gt;`</span><span class="p">;</span>
</pre></div>
</div>
<p>Es necessita donar d’alta un Widget o ampliar les vistes. Per provar si funciona el donamem d’alta de la manera més senzilla, amb un <code class="docutils literal notranslate"><span class="pre">widget</span></code> independent a l’estil del <code class="docutils literal notranslate"><span class="pre">web_ribbon</span></code>:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">registry</span><span class="p">.</span><span class="nx">category</span><span class="p">(</span><span class="s2">&quot;view_widgets&quot;</span><span class="p">).</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;click_count&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">MyComponent</span><span class="p">});</span>
</pre></div>
</div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;widget</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;click_count&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<blockquote>
<div><p>El codi anterior és símplement un exemple tret de la documentació d’Odoo. Té un problema de disseny i és que la plantilla <code class="docutils literal notranslate"><span class="pre">xml</span></code> deuria estar en un fitxer a banda i ser referenciada per a poder estar en un asset, poder ser traduida i ser més eficient.</p>
</div></blockquote>
<div class="tip admonition">
<p class="admonition-title">Consells</p>
<p>El client web d’Odoo, al igual que la programació del servidor, té moltes opcions. Amés, canvia més d’una versió a un altra, al menys mentre s’acaba de consolidar OWL. Per tant, és interessant buscar exemples a la documentació d’Odoo. Especialment a l’addon Web, però també es pot buscar al propi repositori d’Odoo en github per veure cóm utilitzen determinades classes o funcions a la resta de mòduls.</p>
</div>
</section>
<section id="insertar-components-en-odoo">
<h2>Insertar components en Odoo<a class="headerlink" href="#insertar-components-en-odoo" title="Link to this heading">#</a></h2>
<p>Els components fets en OWL per a Odoo es poden aplicar de moltes maneres, entre elles:</p>
<ul class="simple">
<li><p>Com a widgets de fields amb <code class="docutils literal notranslate"><span class="pre">widget=””</span></code></p></li>
<li><p>Com widgets independents com el <code class="docutils literal notranslate"><span class="pre">web_ribbon</span></code> dins de vistes.</p></li>
<li><p>Amb <code class="docutils literal notranslate"><span class="pre">client</span> <span class="pre">actions</span></code> que mostren un component personalitzar. Ací es tracta de crear un <code class="docutils literal notranslate"><span class="pre">ir.actions.client</span></code> amb un tag determinat que apunte a un component enregistrat com <code class="docutils literal notranslate"><span class="pre">registry.category(&quot;actions&quot;)</span></code></p></li>
<li><p>Com una vista personalitzada cridada amb un action window.</p></li>
<li><p>Dins d’altres components com a component predefinit.</p></li>
<li><p>Dialogs (Popups personalitzats)</p></li>
<li><p>Notification Toasts (Notificacions emergents)</p></li>
</ul>
<p>Algunes d’aquestes maneres les anirem utilitzant al llarg d’aquest article. Per exemple, el <code class="docutils literal notranslate"><span class="pre">click_count</span></code> de l’exemple anterior és un widget independent.</p>
<p>Per a que els components i altres elements del frontend estiguen disponibles per a ser insertats en altres components s’ha d’enregistrar. OWL gestiona el registres a l’objecte <code class="docutils literal notranslate"><span class="pre">registry</span></code>. Aquests estan organitzats per categories. A nosaltres en interessen les categories de <code class="docutils literal notranslate"><span class="pre">actions</span></code>,  <code class="docutils literal notranslate"><span class="pre">views</span></code>, <code class="docutils literal notranslate"><span class="pre">view_widgets</span></code> o <code class="docutils literal notranslate"><span class="pre">fields</span></code>, per exemple.</p>
</section>
<section id="modificar-components-en-owl">
<h2>Modificar components en OWL<a class="headerlink" href="#modificar-components-en-owl" title="Link to this heading">#</a></h2>
<p>De la mateixa manera que hem vist anteriorment, anem a modificar un component existent. En aquest cas serà un component per a un <code class="docutils literal notranslate"><span class="pre">field</span></code>, per tant, estem parlan de un <code class="docutils literal notranslate"><span class="pre">widget</span></code>. La paraula <code class="docutils literal notranslate"><span class="pre">Widget</span></code> es considera obsoleta en Odoo amb OWL, ara cal dir <code class="docutils literal notranslate"><span class="pre">Components</span></code>. No obstant, al crear forms o trees, encara posem <code class="docutils literal notranslate"><span class="pre">widget=</span></code>, per tant, podem entendre al Widget com un component capaç de mostrar o editar dades dins de les vistes.</p>
<blockquote>
<div><p>Cal dir que els Widgets són l’única manera actualment de clavar components personalitzats en <code class="docutils literal notranslate"><span class="pre">form</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span></code> o <code class="docutils literal notranslate"><span class="pre">search</span></code>, ja que aquestes vistes no accepten plantilles <code class="docutils literal notranslate"><span class="pre">Qweb</span></code>. En les vistes <code class="docutils literal notranslate"><span class="pre">form</span></code> sols s’accepta <code class="docutils literal notranslate"><span class="pre">XML</span></code> amb <code class="docutils literal notranslate"><span class="pre">fields</span></code> que poden tenir <code class="docutils literal notranslate"><span class="pre">widgets</span></code>. No obstant, en Kanban i altres més manuals sí es pot utilitzar QWeb.</p>
</div></blockquote>
<p>El primer que farem serà crear un nou component a partir d’un existent amb herència en OWL:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">FabBooleanField</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">BooleanField</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">static</span><span class="w"> </span><span class="nx">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;natacio.FabBooleanField&quot;</span>
<span class="p">}</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">booleanField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">FabBooleanField</span><span class="p">,</span>
<span class="p">};</span>
<span class="nx">registry</span><span class="p">.</span><span class="nx">category</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">).</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;fabboolean&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">booleanField</span><span class="p">);</span>
</pre></div>
</div>
<p>El primer que fem és heretar de <code class="docutils literal notranslate"><span class="pre">BooleanField</span></code>, que és un widget per a un field Boolean que hereta de <code class="docutils literal notranslate"><span class="pre">Component</span></code>.</p>
<p>Tots els components tenen un atribut estátic que es diu <code class="docutils literal notranslate"><span class="pre">template</span></code> i que definirem després en un <code class="docutils literal notranslate"><span class="pre">xml</span></code>.</p>
<p>Després es crea un objecte booleanField que servirà per enregistrar-lo en la categoria de <code class="docutils literal notranslate"><span class="pre">fields</span></code>.</p>
<p>El <code class="docutils literal notranslate"><span class="pre">xml</span></code> és molt simple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;templates</span><span class="w"> </span><span class="na">xml:space=</span><span class="s">&quot;preserve&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;t</span><span class="w"> </span><span class="na">t-name=</span><span class="s">&quot;natacio.FabBooleanField&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;o_fab_boolean_field&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;t</span><span class="w"> </span><span class="na">t-call=</span><span class="s">&quot;web.BooleanField&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;span</span><span class="w"> </span><span class="na">t-if=</span><span class="s">&quot;state.value&quot;</span><span class="nt">&gt;</span>❤️<span class="nt">&lt;/span&gt;</span>
<span class="w">            </span><span class="nt">&lt;span</span><span class="w"> </span><span class="na">t-if=</span><span class="s">&quot;!state.value&quot;</span><span class="nt">&gt;</span>🖤<span class="nt">&lt;/span&gt;</span>
<span class="w">            </span><span class="nt">&lt;span</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;mx-2&quot;</span><span class="nt">&gt;</span>Valor:<span class="w"> </span><span class="nt">&lt;t</span><span class="w"> </span><span class="na">t-esc=</span><span class="s">&quot;state.value&quot;</span><span class="nt">/&gt;&lt;/span&gt;</span>
<span class="w">        </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;/t&gt;</span>
<span class="nt">&lt;/templates&gt;</span>
</pre></div>
</div>
<p>El valor del Boolean està en <code class="docutils literal notranslate"><span class="pre">state</span></code>i amb <code class="docutils literal notranslate"><span class="pre">Qweb</span></code> mostrem un ❤️ en funció del seu valor.</p>
<p>Amb <code class="docutils literal notranslate"><span class="pre">t-call</span></code> es crida a la plantilla original.</p>
<blockquote>
<div><p>Fixem-nos en <code class="docutils literal notranslate"><span class="pre">state</span></code>, que és un atribut heretat del field BooleanField. Les dades les rep per <code class="docutils literal notranslate"><span class="pre">props</span></code>, però en el seu setup les extreu.</p>
</div></blockquote>
</section>
<section id="crear-nous-widgets-en-owl">
<h2>Crear nous Widgets en OWL<a class="headerlink" href="#crear-nous-widgets-en-owl" title="Link to this heading">#</a></h2>
<section id="crear-un-widget-molt-simple">
<h3>Crear un Widget molt simple<a class="headerlink" href="#crear-un-widget-molt-simple" title="Link to this heading">#</a></h3>
<p>Aquest és un codi mínim que funciona per crear un widget:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">xml</span><span class="p">,</span><span class="w"> </span><span class="nx">useState</span><span class="p">,</span><span class="w"> </span><span class="nx">mount</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@odoo/owl&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">standardFieldProps</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@web/views/fields/standard_field_props&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">registry</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@web/core/registry&quot;</span><span class="p">;</span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">CodeField</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="nx">props</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{...</span><span class="nx">standardFieldProps</span><span class="p">}</span>
<span class="w">    </span><span class="nx">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">formattedValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="nx">CodeField</span><span class="p">.</span><span class="nx">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">xml</span><span class="sb">`&lt;pre t-esc=&quot;formattedValue&quot; class=&quot;bg-primary text-white p-3 rounded&quot;/&gt;`</span><span class="p">;</span>
<span class="nx">registry</span><span class="p">.</span><span class="nx">category</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">).</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;codefield&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">CodeField</span><span class="p">,</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Per utilitzar el widget:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;field</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;code&quot;</span><span class="w"> </span><span class="na">widget=</span><span class="s">&quot;codefield&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Aquest field sols és de lectura i mostra el codi dins d’un <code class="docutils literal notranslate"><span class="pre">&lt;pre&gt;</span></code> blau. És interessant perquè arreplega el seu valor de <code class="docutils literal notranslate"><span class="pre">props</span></code> i perquè pot ser utilitzat com a Widget. A continuació anem a aprofuncir un poc més i a fer Widgets i components més complexos.</p>
<blockquote>
<div><p>Hi ha widgets com el <code class="docutils literal notranslate"><span class="pre">ribbon</span></code> que es poden fer i enregistrar i utilitzar directament.</p>
</div></blockquote>
</section>
<section id="crear-un-widget-per-a-un-many2many">
<h3>Crear un widget per a un Many2many<a class="headerlink" href="#crear-un-widget-per-a-un-many2many" title="Link to this heading">#</a></h3>
<p>Els components per a fields en Odoo han d’oferir al component pare uns <code class="docutils literal notranslate"><span class="pre">props</span></code> estàndad. El pare els utilitzarà per passar tota l’informació que necessita el component fill. El primer que necessitem és indicar aquests props i llegir les dades en la funció <code class="docutils literal notranslate"><span class="pre">setup</span></code>:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Tree</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="nx">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;natacio.Tree&quot;</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="nx">props</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span><span class="nx">standardFieldProps</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">relatedRecords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([]);</span>
<span class="w">    </span><span class="nx">setup</span><span class="p">(){</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">);</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">].</span><span class="nx">records</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">r</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">resId</span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">orm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useService</span><span class="p">(</span><span class="s2">&quot;orm&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">ids</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">orm</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">].</span><span class="nx">resModel</span><span class="p">,</span><span class="w"> </span><span class="nx">ids</span><span class="p">,</span><span class="w"> </span><span class="p">[]).</span><span class="nx">then</span><span class="p">((</span><span class="nx">records</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">relatedRecords</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">records</span><span class="p">);</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nx">registry</span><span class="p">.</span><span class="nx">category</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">).</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;tree&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">Tree</span><span class="p">});</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Props</span></code> té molta informació sobre tot el que necessita el field i la vista pare.</p>
<p>Amés, l’exemple utilitza <code class="docutils literal notranslate"><span class="pre">this.orm.read()</span></code> que és una funció disponible al servici <code class="docutils literal notranslate"><span class="pre">orm</span></code>. Els servicis proporcionen diverses utilitats. En aquest cas, són les mateixes funcions de l’ORM que es poden fer als <code class="docutils literal notranslate"><span class="pre">models</span></code>. Aquesta funció necessita el model, les ids a llegir i un array de fields. Si l’array està buit els retorna tots.</p>
<p>Una altra cosa interessant és <code class="docutils literal notranslate"><span class="pre">relatedRecords</span></code>. Es declara com un <code class="docutils literal notranslate"><span class="pre">useState</span></code> per aconseguir la reactivitat. Les dades que es posen ahí es sincronitzaràn amb l’intefície. En cas de que canvien, canviaran a l’intefície.</p>
<p>Falta definir el <code class="docutils literal notranslate"><span class="pre">xml</span></code> de la plantilla:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&lt;t</span><span class="w"> </span><span class="na">t-name=</span><span class="s">&quot;natacio.Tree&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;natacio-tree-container&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">t-ref=</span><span class="s">&quot;treeContainer&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;t</span><span class="w"> </span><span class="na">t-esc=</span><span class="s">&quot;relatedRecords.length&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;t</span><span class="w"> </span><span class="na">t-foreach=</span><span class="s">&quot;relatedRecords&quot;</span><span class="w"> </span><span class="na">t-as=</span><span class="s">&quot;i&quot;</span><span class="w"> </span><span class="na">t-key=</span><span class="s">&quot;i.id&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;p&gt;</span>
<span class="w">                    </span><span class="nt">&lt;t</span><span class="w"> </span><span class="na">t-esc=</span><span class="s">&quot;i.name&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/p&gt;</span>
<span class="w">            </span><span class="nt">&lt;/t&gt;</span>
<span class="w">        </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;/t&gt;</span>
</pre></div>
</div>
<p>Aquesta template mostra tant la quantitat de registres com el nom de tots ells. És molt simple, però amb altres etiquetes i <code class="docutils literal notranslate"><span class="pre">css</span></code> es podria fer una llista com la vista <code class="docutils literal notranslate"><span class="pre">list</span></code>, per exemple.</p>
</section>
<section id="props">
<h3>Props<a class="headerlink" href="#props" title="Link to this heading">#</a></h3>
<p>Com en React o Vue, OWL permet que els components tinguen una propietat estàtica anomenada <code class="docutils literal notranslate"><span class="pre">props</span></code> (properties). Serveix per a comunicar al component les seues dades.</p>
<p><a class="github reference external" href="https://github.com/odoo/owl/blob/master/doc/reference/props.md">odoo/owl</a></p>
<p>Els props poden ser valors estàtics, poden ser referències a objectes per ser dinàmics i reactius o poden ser referències a funcions. Els components pares els poden assignar de la següent manera:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nx">Child</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="nx">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">xml</span><span class="sb">`&lt;div&gt;&lt;t t-esc=&quot;props.a&quot;/&gt;&lt;t t-esc=&quot;props.b&quot;/&gt;&lt;/div&gt;`</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Parent</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="nx">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">xml</span><span class="sb">`&lt;div&gt;&lt;Child a=&quot;state.a&quot; b=&quot;&#39;string&#39;&quot;/&gt;&lt;/div&gt;`</span><span class="p">;</span>
<span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="nx">components</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Child</span><span class="w"> </span><span class="p">};</span>
<span class="w">  </span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;fromparent&quot;</span><span class="w"> </span><span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Com que el pare ha de saber quin nom posar al props, hi ha uns amb un nom per defecte que funcionen específicament per a Odoo: <code class="docutils literal notranslate"><span class="pre">standardFieldProps</span></code>. Amés, es poden crear nous dins de l’objecte <code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">props</span></code> del component. D’aquesta manera, fem components (Widgets) compatibles amb les vistes (components pares) ja existents.  El codi oficial d’Odoo els defineix així:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">standardFieldProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="nx">optional</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">readonly</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">,</span><span class="w"> </span><span class="nx">optional</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">record</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nb">Object</span><span class="w"> </span><span class="p">},</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Dins del record es por aconseguir tota l’informació que es vol mostrar. De fet, està tota l’informació de la vista que conté el field.</p>
<blockquote>
<div><p>Cal fer, per exemple, un console.log dels props per veure tot el que poden oferir, en els exemples es por veure que obtenim les dades i el nom del model. En l’exemple les dades són d’un Many2many, per tant, contenen l’array <code class="docutils literal notranslate"><span class="pre">records</span></code> amb tots els registres relacionats.</p>
</div></blockquote>
</section>
<section id="components-prefedinits">
<h3>Components prefedinits<a class="headerlink" href="#components-prefedinits" title="Link to this heading">#</a></h3>
<p>Odoo té desenvolupats amb OWL una serie de components predefinits que podem utilitzar en els nostre components.</p>
<p>Documentació: <a class="reference external" href="https://www.odoo.com/documentation/18.0/developer/reference/frontend/owl_components.html#reference-list">https://www.odoo.com/documentation/18.0/developer/reference/frontend/owl_components.html#reference-list</a></p>
<p>Aquest, com els components que podem fer nosaltres, tenen una etiqueta i una serie de <code class="docutils literal notranslate"><span class="pre">props</span></code> que es poden definir. Si observem el field <code class="docutils literal notranslate"><span class="pre">BooleanField</span></code>, que és molt simple, aquesta es la seua plantilla:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">&lt;t</span><span class="w"> </span><span class="na">t-name=</span><span class="s">&quot;web.BooleanField&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;CheckBox</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;props.id&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;state.value&quot;</span><span class="w"> </span><span class="na">className=</span><span class="s">&quot;&#39;d-inline-block&#39;&quot;</span><span class="w"> </span><span class="na">disabled=</span><span class="s">&quot;props.readonly&quot;</span><span class="w"> </span><span class="na">onChange.bind=</span><span class="s">&quot;onChange&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/t&gt;</span>
</pre></div>
</div>
<p>I és importat així en javascript</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="nx">components</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">CheckBox</span><span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
<section id="crear-components-predefinits">
<h4>Crear Components predefinits<a class="headerlink" href="#crear-components-predefinits" title="Link to this heading">#</a></h4>
<p>Un component que siga importat i afegi a <code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">components</span></code>  ja pot utilitzar-se com a etiqueta. Mirem aquest exemple tant simple:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">EmojiField</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="nx">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;modul.EmojiField&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>En un altre component:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">components</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">EmojiField</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;EmojiField/&gt;</span>
</pre></div>
</div>
<p>La propia definició com a classe i importació com a element de l’objecte <code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">components</span></code> ja fa que es puga utilitzar com a <code class="docutils literal notranslate"><span class="pre">tag</span></code> en la plantilla XML.</p>
</section>
</section>
<section id="crear-un-widget-per-a-un-field-en-mode-lectura-escriptura">
<h3>Crear un widget per a un field en mode lectura/escriptura<a class="headerlink" href="#crear-un-widget-per-a-un-field-en-mode-lectura-escriptura" title="Link to this heading">#</a></h3>
</section>
</section>
<section id="modificar-una-vista-en-owl">
<h2>Modificar una vista en OWL<a class="headerlink" href="#modificar-una-vista-en-owl" title="Link to this heading">#</a></h2>
<p>Les vistes existents també són <code class="docutils literal notranslate"><span class="pre">components</span></code>, però són molt més complexos que els <code class="docutils literal notranslate"><span class="pre">fields</span></code> normals. Un field sol obtenir les dades per <code class="docutils literal notranslate"><span class="pre">props</span></code> i, com a molt, implementar la manera de comunicar els canvis a la vista. Les vistes han d’obtenir les dades del servidor, cridar a widgets i, en ocasions, interpretar un <code class="docutils literal notranslate"><span class="pre">xml</span></code> passat per <code class="docutils literal notranslate"><span class="pre">arch</span></code>.</p>
<p>Per abordar aquesta complexitat, Odoo opta per una arquitectura <code class="docutils literal notranslate"><span class="pre">MVC</span></code> i fa per a les vistes un model, un controlador i un renderitzador, a banda d’una plantilla <code class="docutils literal notranslate"><span class="pre">xml</span></code>.</p>
</section>
<section id="crear-noves-vistes-en-owl">
<h2>Crear noves vistes en OWL<a class="headerlink" href="#crear-noves-vistes-en-owl" title="Link to this heading">#</a></h2>
<p><a class="reference external" href="https://codingdodo.com/odoo-javascript-101-classes-and-mvc-architecture/">https://codingdodo.com/odoo-javascript-101-classes-and-mvc-architecture/</a>
<a class="reference external" href="https://codingdodo.com/odoo-15-javascript-reference/">https://codingdodo.com/odoo-15-javascript-reference/</a></p>
</section>
<section id="hooks-en-owl">
<h2>Hooks en OWL<a class="headerlink" href="#hooks-en-owl" title="Link to this heading">#</a></h2>
<p><a class="reference external" href="https://www.cybrosys.com/blog/hooks-in-odoo-owl-framework">https://www.cybrosys.com/blog/hooks-in-odoo-owl-framework</a></p>
<p><a class="reference external" href="https://github.com/odoo/owl">OWL, el nou framework per a Odoo 14</a></p>
<p><a class="reference external" href="https://www.oocademy.com/v14.0/tutorial/introduction-to-owl-87#-Adding-our-first-component">tutorial
complet</a></p>
<p><a class="reference external" href="https://www.fatalerrors.org/a/odoo14-odoo-web-library-owl.html">2</a></p>
<p><a class="reference external" href="https://www.cybrosys.com/blog/hooks-in-odoo-owl-framework">3</a></p>
<p><a class="reference external" href="https://www.youtube.com/watch?v=IrcQf4hgjtw">https://www.youtube.com/watch?v=IrcQf4hgjtw</a></p>
<p>Enllaços: <a class="github reference external" href="https://github.com/odoo/owl">odoo/owl</a>
<a class="reference external" href="https://odoo.github.io/owl/playground/">https://odoo.github.io/owl/playground/</a>
<a class="reference external" href="https://medium.com/cybrosys/introduction-to-odoo-owl-framework-29cbe9111919">https://medium.com/cybrosys/introduction-to-odoo-owl-framework-29cbe9111919</a>
<a class="reference external" href="https://www.odoo.com/es_ES/forum/ayuda-1/blogs-or-websites-available-for-owl-odoo-web-library-for-odoo-v14-to-learn-from-the-scratch-168365">https://www.odoo.com/es_ES/forum/ayuda-1/blogs-or-websites-available-for-owl-odoo-web-library-for-odoo-v14-to-learn-from-the-scratch-168365</a>
<a class="reference external" href="https://www.youtube.com/watch?v=HSer89uSnoM&amp;amp;list=PL1-aSABtP6ABc8HP_02IuC9lUHESnUJM1&amp;amp;index=11">https://www.youtube.com/watch?v=HSer89uSnoM&amp;list=PL1-aSABtP6ABc8HP_02IuC9lUHESnUJM1&amp;index=11</a></p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="qweb">
<h1>QWeb<a class="headerlink" href="#qweb" title="Link to this heading">#</a></h1>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="web_controllers.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Web Controllers</p>
      </div>
    </a>
    <a class="right-next"
       href="Jupyter%20y%20Odoo.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Usar Jupyter en Odoo.</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Client Web</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arquitectura-del-client-web">Arquitectura del client web</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#enviant-el-client-al-navegador">Enviant el client al navegador</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#els-assets">Els Assets</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#exemple-afegir-css-al-nostre-modul">Exemple: Afegir CSS al nostre mòdul</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arquitectura-dels-moduls-en-javascript">Arquitectura dels mòduls en Javascript</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#utilitzar-moduls-natius-es6-en-odoo">Utilitzar mòduls natius ES6 en Odoo</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#owl">OWL</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-un-component-d-odoo-en-owl">Crear un component d’Odoo en OWL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#insertar-components-en-odoo">Insertar components en Odoo</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modificar-components-en-owl">Modificar components en OWL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-nous-widgets-en-owl">Crear nous Widgets en OWL</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-un-widget-molt-simple">Crear un Widget molt simple</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-un-widget-per-a-un-many2many">Crear un widget per a un Many2many</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#props">Props</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#components-prefedinits">Components prefedinits</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-components-predefinits">Crear Components predefinits</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-un-widget-per-a-un-field-en-mode-lectura-escriptura">Crear un widget per a un field en mode lectura/escriptura</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modificar-una-vista-en-owl">Modificar una vista en OWL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-noves-vistes-en-owl">Crear noves vistes en OWL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hooks-en-owl">Hooks en OWL</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#qweb">QWeb</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jose Castillo
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>